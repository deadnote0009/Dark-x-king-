import re
import uuid
import socket

import psutil
import platform
from pyrogram import Client, filters

def humanbytes(size):
    """ğ™²ğ™¾ğ™½ğš…ğ™´ğšğšƒ ğ™±ğšˆğšƒğ™´ğš‚ ğšƒğ™¾ ğ™±ğšˆğšƒğ™´ğš‚ ğš‚ğ™¾ ğšƒğ™·ğ™°ğšƒ ğ™·ğš„ğ™¼ğ™°ğ™½ ğ™²ğ™°ğ™½ ğšğ™´ğ™°ğ™³ ğ™¸ğšƒ."""
    if not size:
        return ""
    power = 2 ** 10
    raised_to_pow = 0
    dict_power_n = {0: "", 1: "Ki", 2: "Mi", 3: "Gi", 4: "Ti"}

    while size > power:
        size /= power
        raised_to_pow += 1
    return str(round(size, 2)) + " " + dict_power_n[raised_to_pow] + "B"

# ============================ğ™¼ğ™¾ğ™³ğš„ğ™»ğ™´ğš‚ ğ™±ğšˆ ğš‚ğš„ğ™¼ğ™¸ğšƒ ğšˆğ™°ğ™³ğ™°ğš…=======================
# =============================ğ™µğ™´ğšƒğ™²ğ™· ğš‚ğšˆğš‚ğ™¸ğ™½ğ™µğ™¾===============================

@Client.on_message(command(["sysinfo"]) & ~filters.edited)
async def give_sysinfo(client, message):
    splatform = platform.system()
    platform_release = platform.release()
    platform_version = platform.version()
    architecture = platform.machine()
    hostname = socket.gethostname()
    ip_address = socket.gethostbyname(socket.gethostname())
    mac_address = ":".join(re.findall("..", "%012x" % uuid.getnode()))
    processor = platform.processor()
    ram = humanbytes(round(psutil.virtual_memory().total))
    cpu_freq = psutil.cpu_freq().current
    if cpu_freq >= 1000:
        cpu_freq = f"{round(cpu_freq / 1000, 2)}É¢Êœá´¢"
    else:â€‹
        cpu_freq = f"{round(cpu_freq, 2)}á´Êœá´¢"
    du = psutil.disk_usage(client.workdir)
    psutil.disk_io_counters()
    disk = f"{humanbytes(du.used)} / {humanbytes(du.total)} " f"({du.percent}%)"
    cpu_len = len(psutil.Process().cpu_affinity())
    darkxmusic = f""" **â€¢â€¢ sÊsá´›á´‡á´ ÉªÉ´êœ°á´Ê€á´á´€á´›Éªá´É´ â€¢â€¢**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”£â˜… **á´˜ÊŸá´€á´›êœ°á´Ê€á´ :** `{splatform}`
â”£â˜… **á´˜ÊŸá´€á´›êœ°á´Ê€á´ Ê€á´‡ÊŸá´‡á´€sá´‡ :** `{platform_release}`
â”£â˜… **á´˜ÊŸá´€á´›êœ°á´Ê€á´ á´ á´‡Ê€sÉªá´É´â€‹ :** `{platform_version}`
â”£â˜… **á´€Ê€á´„ÊœÉªá´›á´‡á´„á´›á´œÊ€á´‡ :** `{architecture}`
â”£â˜… **Êœá´sá´›É´á´€á´á´‡ :** `{hostname}`
â”£â˜… **Éªá´˜ :** `{ip_address}`
â”£â˜… **á´á´€á´„ :** `{mac_address}`
â”£â˜… **á´˜Ê€á´á´„á´‡ssá´Ê€ :** `{processor}`
â”£â˜… **Ê€á´€á´ : ** `{ram}`
â”£â˜… **á´„á´˜á´œ :** `{cpu_len}`
â”£â˜… **á´„á´˜á´œ êœ°Ê€á´‡Ç«á´œá´‡É´á´„Ê :** `{cpu_freq}`
â”£â˜… **á´…Éªsá´‹ :** `{disk}`
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
    """
    await message.reply(darkxmusic)
